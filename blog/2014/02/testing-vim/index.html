<!DOCTYPE html>
<html lang='en-us'>
  <head>
    <meta charset='utf-8'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <title>testing for vim | blog | cbjohnson</title>
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/application.js" type="text/javascript"></script>
  </head>
  <body>
    <div class='wrapper'>
      <div class='container'>
        <header class='head'>
          <h1><a href="/">cbjohnson</a></h1>
        </header>
        <aside class='sidenav'>
          <nav>
            <ul>
              <div class='menu'>
                <li>
                  <a href="/">Info</a>
                </li>
                <li class='active'>
                  <a href="/blog/">Blog</a>
                </li>
                <li>
                  <a href="/blog/archive/">Archive</a>
                </li>
                <li>
                  <a href="/contact/">Contact</a>
                </li>
              </div>
              <div class='social'>
                <li><a href="https://twitter.com/charbajo">@charbajo</a></li>
                <li><a href="https://github.com/charlesbjohnson">GitHub</a></li>
                <li><a href="http://www.last.fm/user/cbj7777">Last.fm</a></li>
              </div>
            </ul>
          </nav>
        </aside>
        <section class='main'>
          <header class='head-main'>
            <h2>Blog</h2>
          </header>
          <section class='content-main'>
            <article>
              <header>
                <h3>Testing for Vim</h3>
                <p class='blog-stamp'>
                  <time datetime='2014-02-07 13:16:00 -0500'>Feb  7, 2014</time>
                </p>
              </header>
              <section class='content-article'>
                <p>I really enjoy using Vim. One of the best things about Vim is the community of
                plugins available. I&rsquo;ve spent a small amount of time learning enough Vimscript
                to be able to understand what is happening in my vimrc (thanks to the great
                <a href="https://leanpub.com/learnvimscriptthehardway">book</a> by Steve Losh, which is also available for free
                <a href="http://learnvimscriptthehardway.stevelosh.com/">here</a>) but I&rsquo;ve been really fascinated by the amount of work
                that must go into making a Vim plugin. I feel like it must be fairly challenging
                considering how old Vim is, how scarce the resources for it are (beyond <code>:help</code>,
                of course), and how seemingly bizarre/arcane Vimscript is. Another thing that
                puzzled me was how a plugin author managed to effectively test their plugin, if
                they did at all.</p>
                
                <p>Some plugins separate the core of their logic from Vim entirely
                (such as <a href="https://github.com/Valloric/YouCompleteMe">YouCompleteMe</a> and <a href="https://github.com/marijnh/tern">Tern</a> of <a href="https://github.com/marijnh/tern_for_vim">tern_for_vim</a>)
                which also allows them to test the way that they would normally (whether it is
                through unit tests or specs or whatever else). If I&rsquo;ve learned anything from 
                working with Ruby and Rails, however, it is that there is always room for
                integration testing. This led me to an interesting question: how do plugin
                authors perform integration testing?  And not even just for Vim&hellip; The same
                could be said about <a href="https://www.jetbrains.com/resharper/">ReSharper</a> and Visual Studio. What do they do?
                What tools are available and what <em>can</em> they do?</p>
                
                <p>The other day I was looking through the source of <a href="https://github.com/svermeulen/vim-easyclip">vim-easyclip</a>
                (great plugin, by the way, I recommend it) and I saw something peculiar.
                25% of the repo is written in Ruby. Turns out there is <code>spec/</code> directory with
                a bunch of RSpec in it. Then I saw this line in one of the specs:</p>
                <div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="vi">@vim</span> <span class="o">=</span> <span class="no">Vimbot</span><span class="o">::</span><span class="no">Driver</span><span class="p">.</span><span class="nf">new</span></pre></td></tr></tbody></table></div>
                <p><img title="My face when" alt="intriguing" src="/blog/2014/02/testing-vim/intriguing.gif" /></p>
                
                <p>It turns out that in the case of Vim that there are actually a few tools
                specifically made for testing Vim plugins. They&rsquo;re even written in Ruby! Who
                would have guessed?  <a href="https://github.com/maxbrunsfeld/vimbot">vimbot</a> is the plugin used by easyclip but it
                doesn&rsquo;t look like it has been updated in some time. There&rsquo;s also
                <a href="https://github.com/AndrewRadev/vimrunner">vimrunner</a> and a few others from <a href="https://stackoverflow.com/questions/3029882/tools-for-testing-vim-plugins">this</a>
                question on StackOverlow.</p>
                
                <p>I have no idea why this excites me or if these tools are even all that great but
                I thought that this was pretty neat nonetheless. I&rsquo;m always really surprised
                by the extent to which Ruby is used for testing and I&rsquo;d like to know how these
                libraries actually work. Who knows, it may not even be all that special.</p>
                
                <p>That&rsquo;s all I got for this time. I just felt like sharing something I thought was
                interesting. Thanks for reading.</p>
              </section>
            </article>
          </section>
        </section>
      </div>
    </div>
    <footer class='footer'>
      <p>
        <small>
          Â© 2014 Charles B Johnson. Made with
          <a href="http://middlemanapp.com/">Middleman</a>
          and
          <a href="https://github.com/charlesbjohnson/cbjohnson.info">GitHub</a>.
        </small>
      </p>
    </footer>
  </body>
</html>

